# Generated by Django 5.1.3 on 2025-12-14 17:26

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Goal',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('identifier', models.CharField(db_index=True, max_length=100, unique=True)),
                ('lifecycle_status', models.CharField(choices=[('proposed', 'Proposed'), ('planned', 'Planned'), ('accepted', 'Accepted'), ('active', 'Active'), ('on-hold', 'On Hold'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('entered-in-error', 'Entered in Error'), ('rejected', 'Rejected')], db_index=True, default='proposed', max_length=20)),
                ('achievement_status', models.CharField(blank=True, choices=[('in-progress', 'In Progress'), ('improving', 'Improving'), ('worsening', 'Worsening'), ('no-change', 'No Change'), ('achieved', 'Achieved'), ('sustaining', 'Sustaining'), ('not-achieved', 'Not Achieved'), ('no-progress', 'No Progress'), ('not-attainable', 'Not Attainable')], db_index=True, max_length=20, null=True)),
                ('category', models.JSONField(blank=True, null=True)),
                ('priority', models.CharField(blank=True, choices=[('high-priority', 'High Priority'), ('medium-priority', 'Medium Priority'), ('low-priority', 'Low Priority')], max_length=20, null=True)),
                ('description', models.JSONField()),
                ('subject_id', models.CharField(db_index=True, max_length=100)),
                ('start_date', models.DateField(blank=True, db_index=True, null=True)),
                ('status_date', models.DateField(blank=True, null=True)),
                ('expressed_by_id', models.CharField(blank=True, max_length=100, null=True)),
                ('expressed_by_display', models.CharField(blank=True, max_length=200, null=True)),
                ('addresses', models.JSONField(blank=True, null=True)),
                ('note', models.TextField(blank=True, null=True)),
                ('status_reason', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_goals', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'fhir_goal',
                'ordering': ['-start_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='GoalTarget',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('measure', models.JSONField(blank=True, null=True)),
                ('detail_quantity_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('detail_quantity_unit', models.CharField(blank=True, max_length=50, null=True)),
                ('detail_quantity_comparator', models.CharField(blank=True, max_length=10, null=True)),
                ('detail_range_low', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('detail_range_high', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('detail_codeable_concept', models.JSONField(blank=True, null=True)),
                ('detail_string', models.CharField(blank=True, max_length=500, null=True)),
                ('detail_boolean', models.BooleanField(blank=True, null=True)),
                ('detail_integer', models.IntegerField(blank=True, null=True)),
                ('detail_ratio', models.JSONField(blank=True, null=True)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('due_duration', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('goal', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='targets', to='fhir_api.goal')),
            ],
            options={
                'db_table': 'fhir_goal_target',
                'ordering': ['due_date'],
            },
        ),
        migrations.CreateModel(
            name='Media',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('identifier', models.CharField(db_index=True, max_length=100, unique=True)),
                ('status', models.CharField(choices=[('preparation', 'Preparation'), ('in-progress', 'In Progress'), ('not-done', 'Not Done'), ('on-hold', 'On Hold'), ('stopped', 'Stopped'), ('completed', 'Completed'), ('entered-in-error', 'Entered in Error'), ('unknown', 'Unknown')], db_index=True, default='completed', max_length=20)),
                ('type', models.CharField(choices=[('image', 'Image'), ('video', 'Video'), ('audio', 'Audio')], db_index=True, max_length=10)),
                ('modality', models.JSONField(blank=True, null=True)),
                ('view', models.JSONField(blank=True, null=True)),
                ('subject_id', models.CharField(db_index=True, max_length=100)),
                ('encounter_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('created_datetime', models.DateTimeField(db_index=True, default=django.utils.timezone.now)),
                ('issued', models.DateTimeField(blank=True, null=True)),
                ('operator_id', models.CharField(blank=True, max_length=100, null=True)),
                ('operator_display', models.CharField(blank=True, max_length=200, null=True)),
                ('reason_code', models.JSONField(blank=True, null=True)),
                ('body_site', models.JSONField(blank=True, null=True)),
                ('device_name', models.CharField(blank=True, max_length=200, null=True)),
                ('width', models.IntegerField(blank=True, null=True)),
                ('height', models.IntegerField(blank=True, null=True)),
                ('frames', models.IntegerField(blank=True, null=True)),
                ('duration', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('content_type', models.CharField(db_index=True, max_length=100)),
                ('content_title', models.CharField(blank=True, max_length=200, null=True)),
                ('content_creation', models.DateTimeField(blank=True, null=True)),
                ('file_path', models.CharField(blank=True, max_length=500, null=True)),
                ('file_size', models.IntegerField(blank=True, null=True)),
                ('file_hash', models.CharField(blank=True, max_length=64, null=True)),
                ('thumbnail_path', models.CharField(blank=True, max_length=500, null=True)),
                ('thumbnail_size', models.IntegerField(blank=True, null=True)),
                ('note', models.TextField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_media', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Media',
                'db_table': 'fhir_media',
                'ordering': ['-created_datetime'],
            },
        ),
        migrations.CreateModel(
            name='MedicationAdministration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('identifier', models.CharField(db_index=True, max_length=100, unique=True)),
                ('status', models.CharField(choices=[('in-progress', 'In Progress'), ('not-done', 'Not Done'), ('on-hold', 'On Hold'), ('completed', 'Completed'), ('entered-in-error', 'Entered in Error'), ('stopped', 'Stopped'), ('unknown', 'Unknown')], db_index=True, default='completed', max_length=20)),
                ('status_reason', models.JSONField(blank=True, null=True)),
                ('medication_code', models.JSONField()),
                ('medication_request', models.CharField(blank=True, max_length=100, null=True)),
                ('patient_id', models.CharField(db_index=True, max_length=100)),
                ('encounter_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('effective_datetime', models.DateTimeField(blank=True, db_index=True, null=True)),
                ('effective_period_start', models.DateTimeField(blank=True, null=True)),
                ('effective_period_end', models.DateTimeField(blank=True, null=True)),
                ('performer_function', models.JSONField(blank=True, null=True)),
                ('performer_actor_id', models.CharField(blank=True, max_length=100, null=True)),
                ('performer_actor_display', models.CharField(blank=True, max_length=200, null=True)),
                ('dosage_text', models.TextField(blank=True, null=True)),
                ('dosage_site', models.JSONField(blank=True, null=True)),
                ('dosage_route', models.JSONField(blank=True, null=True)),
                ('dosage_method', models.JSONField(blank=True, null=True)),
                ('dosage_dose_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('dosage_dose_unit', models.CharField(blank=True, max_length=50, null=True)),
                ('dosage_rate_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('dosage_rate_unit', models.CharField(blank=True, max_length=50, null=True)),
                ('reason_code', models.JSONField(blank=True, null=True)),
                ('reason_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('device', models.JSONField(blank=True, null=True)),
                ('note', models.TextField(blank=True, null=True)),
                ('event_history', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='administered_medications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'fhir_medication_administration',
                'ordering': ['-effective_datetime', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Task',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('identifier', models.CharField(db_index=True, max_length=100, unique=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('requested', 'Requested'), ('received', 'Received'), ('accepted', 'Accepted'), ('rejected', 'Rejected'), ('ready', 'Ready'), ('cancelled', 'Cancelled'), ('in-progress', 'In Progress'), ('on-hold', 'On Hold'), ('failed', 'Failed'), ('completed', 'Completed'), ('entered-in-error', 'Entered in Error')], db_index=True, default='requested', max_length=20)),
                ('status_reason', models.JSONField(blank=True, null=True)),
                ('business_status', models.JSONField(blank=True, null=True)),
                ('intent', models.CharField(choices=[('unknown', 'Unknown'), ('proposal', 'Proposal'), ('plan', 'Plan'), ('order', 'Order'), ('original-order', 'Original Order'), ('reflex-order', 'Reflex Order'), ('filler-order', 'Filler Order'), ('instance-order', 'Instance Order'), ('option', 'Option')], default='order', max_length=20)),
                ('priority', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('asap', 'ASAP'), ('stat', 'STAT')], db_index=True, default='routine', max_length=10)),
                ('code', models.JSONField(blank=True, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('focus', models.CharField(blank=True, db_index=True, max_length=200, null=True)),
                ('for_patient_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('encounter_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('authored_on', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('last_modified', models.DateTimeField(auto_now=True)),
                ('execution_period_start', models.DateTimeField(blank=True, null=True)),
                ('execution_period_end', models.DateTimeField(blank=True, null=True)),
                ('requester_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('requester_display', models.CharField(blank=True, max_length=200, null=True)),
                ('owner_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('owner_display', models.CharField(blank=True, max_length=200, null=True)),
                ('based_on', models.JSONField(blank=True, null=True)),
                ('part_of', models.JSONField(blank=True, null=True)),
                ('restriction_period_start', models.DateTimeField(blank=True, null=True)),
                ('restriction_period_end', models.DateTimeField(blank=True, null=True)),
                ('restriction_repetitions', models.IntegerField(blank=True, null=True)),
                ('restriction_recipient', models.JSONField(blank=True, null=True)),
                ('input', models.JSONField(blank=True, null=True)),
                ('output', models.JSONField(blank=True, null=True)),
                ('note', models.TextField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_tasks', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'fhir_task',
                'ordering': ['-priority', '-authored_on'],
            },
        ),
        migrations.AddIndex(
            model_name='goal',
            index=models.Index(fields=['subject_id', 'lifecycle_status'], name='fhir_goal_subject_59ed54_idx'),
        ),
        migrations.AddIndex(
            model_name='goal',
            index=models.Index(fields=['lifecycle_status', 'start_date'], name='fhir_goal_lifecyc_86d85f_idx'),
        ),
        migrations.AddIndex(
            model_name='goal',
            index=models.Index(fields=['achievement_status'], name='fhir_goal_achieve_269f49_idx'),
        ),
        migrations.AddIndex(
            model_name='media',
            index=models.Index(fields=['subject_id', 'created_datetime'], name='fhir_media_subject_b09b7f_idx'),
        ),
        migrations.AddIndex(
            model_name='media',
            index=models.Index(fields=['type', 'status'], name='fhir_media_type_7bbff2_idx'),
        ),
        migrations.AddIndex(
            model_name='media',
            index=models.Index(fields=['encounter_id'], name='fhir_media_encount_4e35b9_idx'),
        ),
        migrations.AddIndex(
            model_name='medicationadministration',
            index=models.Index(fields=['patient_id', 'effective_datetime'], name='fhir_medica_patient_ce124b_idx'),
        ),
        migrations.AddIndex(
            model_name='medicationadministration',
            index=models.Index(fields=['status', 'effective_datetime'], name='fhir_medica_status_395f80_idx'),
        ),
        migrations.AddIndex(
            model_name='medicationadministration',
            index=models.Index(fields=['performer_actor_id', 'created_at'], name='fhir_medica_perform_4830ee_idx'),
        ),
        migrations.AddIndex(
            model_name='medicationadministration',
            index=models.Index(fields=['medication_request'], name='fhir_medica_medicat_7ffb0f_idx'),
        ),
        migrations.AddIndex(
            model_name='task',
            index=models.Index(fields=['status', 'priority', 'authored_on'], name='fhir_task_status_7a977e_idx'),
        ),
        migrations.AddIndex(
            model_name='task',
            index=models.Index(fields=['owner_id', 'status'], name='fhir_task_owner_i_e418ac_idx'),
        ),
        migrations.AddIndex(
            model_name='task',
            index=models.Index(fields=['for_patient_id', 'status'], name='fhir_task_for_pat_13b074_idx'),
        ),
        migrations.AddIndex(
            model_name='task',
            index=models.Index(fields=['focus'], name='fhir_task_focus_169c73_idx'),
        ),
    ]
